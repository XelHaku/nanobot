; =============================================================================
; multi-nanobots â€” supervisord configuration
; =============================================================================
; Manages all agents. Start with: supervisord -c supervisord.conf
;
; %(here)s expands to the directory containing this file, making paths portable.
;
; If nanobot is installed in a virtualenv, replace the `command` lines with
; the full path to the venv binary, e.g.:
;   command=/path/to/venv/bin/nanobot --config %(here)s/main.config.json gateway

[unix_http_server]
file=%(here)s/logs/supervisor.sock

[supervisord]
nodaemon=true
logfile=%(here)s/logs/supervisord.log
pidfile=%(here)s/logs/supervisord.pid

[supervisorctl]
serverurl=unix://%(here)s/logs/supervisor.sock

[rpcinterface:supervisor]
supervisor.rpcinterface_factory = supervisor.rpcinterface:make_main_rpcinterface

; --- main agent (port 18790) -------------------------------------------------
[program:main]
command=nanobot --config %(here)s/main.config.json gateway
directory=%(here)s
stdout_logfile=logs/main.log
stderr_logfile=logs/main-err.log
autorestart=true
startsecs=5

; --- scout agent (port 18791) ------------------------------------------------
[program:scout]
command=nanobot --config %(here)s/scout.config.json gateway
directory=%(here)s
stdout_logfile=logs/scout.log
stderr_logfile=logs/scout-err.log
autorestart=true
startsecs=5

; --- coordinator agent (port 18792) ------------------------------------------
[program:coordinator]
command=nanobot --config %(here)s/coordinator.config.json gateway
directory=%(here)s
stdout_logfile=logs/coordinator.log
stderr_logfile=logs/coordinator-err.log
autorestart=true
startsecs=5
